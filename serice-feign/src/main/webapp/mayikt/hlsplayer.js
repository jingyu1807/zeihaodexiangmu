function mpsPlayer(l){l.startTime_=new Date().getTime();l.errCallback=l.logCallback||function(v){console.log(v)};var e=false;var s=0;function h(){var J=navigator.userAgent;var G=J.indexOf("compatible")>-1&&J.indexOf("MSIE")>-1;var I=J.indexOf("Edge")>-1&&!G;var K=J.indexOf("Trident")>-1&&J.indexOf("rv:11.0")>-1;if(G){var v=new RegExp("MSIE (\\d+\\.\\d+);");v.test(J);var H=parseFloat(RegExp["$1"]);if(H==7){return 7}else{if(H==8){return 8}else{if(H==9){return 9}else{if(H==10){return 10}else{return 6}}}}}else{if(I){return 12}else{if(K){return 11}else{return false}}}}var f=h();var E=/https/i.test(window.location.protocol);var u=E?"https://":"http://";var d=Math.round(new Date().getTime());var D=d.toString(32);var y=String.fromCharCode(Math.floor(Math.random()*26)+"A".charCodeAt(0));var F=String.fromCharCode(Math.floor(Math.random()*26)+"a".charCodeAt(0));var n,o;var l=l;var w=this;l.useSSL=E;l.session_id="mps_"+l.uin+D+y+F;var c=l.hlsUrl||"";var k=l.url||"";if(!l.container||l.container==""){l.errCallback("缺少必要的参数：container");return}var m=document.getElementById(l.container);if(!m){l.errCallback("container不存在");return}if(!l.uin||!l.appId){l.errCallback("uin或者appId不存在");return}l.globalversion="1.0.6.1.20180816";var A=u+"cdn.aodianyun.com/";var t={comv:A+"mps_v86",htmlv:A+"mps_v87",hlsv:A+"mps_v22"};var j=navigator.userAgent;var x=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"];var i=true;for(var p=0;p<x.length;p++){if(j.indexOf(x[p])>0){i=false;break}}l.isPc=i;$.ajax({type:"GET",url:"https://configmps.aodianyun.com/v1/MPS.GetVodAppConfig",data:{uin:l.uin,appId:l.appId},dataType:"jsonp",async:false,cache:false,jsonp:"callback",jsonpCallback:"a",success:function(K){l.GetConfigTime=new Date().getTime();if(K.Flag==100){if(K.Config.domainIframe){if(K.Config.domainIframe==1){if(top!=self){location.href="about:blank";return}}}for(var J in K.Config){l[J]=K.Config[J]}if(!!l.coverImg){l.adveDeAddr=l.coverImg;delete l.coverImg}++s;var I="<div id='aodianplayer_uid_base"+s+"'></div>";var H="#"+l.container;$(H).append(I);l.mediaid="aodianplayer_uid_base"+s;if(l.model==1){if(k){l.hlsUrl=k}else{if(c){l.hlsUrl=c}}}var G=z();var v=document.getElementById(l.container);if(l.hlsUrl&&l.hlsUrl!=""){if(i){if(l.hlsUrl.indexOf(".mp4")!=-1){g()}else{if(l.enablehtml5&&!f){C()}else{if(G.f){b()}else{C()}}}}else{q()}}else{v.innerHTML="hlsUrl地址未传递";return}}else{l.errCallback(K);return}}});var g=function(){n="mpsComRun";o=setInterval(function(){if(e==true){if(n in window){e=false;mpsComRun.call(w,l);clearInterval(o);return}return}var v=t.comv+"/com.js?v=0713shffhwjehfuyjs";var G=document.createElement("script");G.type="text/javascript";G.charset="UTF-8";G.src=v;document.getElementsByTagName("body")[0].appendChild(G);e=true;if(n&&n in window){e=false;clearInterval(o);mpsComRun.call(w,l)}},100)};var b=function(){n="hlsplayerRun";o=setInterval(function(){if(e==true){if(n in window){e=false;hlsplayerRun.call(w,l);clearInterval(o);return}return}var v=t.hlsv+"/hlsplayer.js?v=shdjhsj39232323/1.1.7.1.20180202130000";var G=document.createElement("script");G.type="text/javascript";G.charset="UTF-8";G.src=v;document.getElementsByTagName("body")[0].appendChild(G);G.onload=G.onreadystatechange=function(){if(!this.readyState||this.readyState==="loaded"||this.readyState==="complete"){G.onload=G.onreadystatechange=null}};G.onerror=function(H){r("hls",v,"loadfail")};e=true;if(n&&n in window){e=false;clearInterval(o);hlsplayerRun.call(w,l)}},100)};var C=function(){l.hlsUrl=l.hlsUrl.replace(/https:\/\/|http:\/\//,u);a(u+"cdn.aodianyun.com/mps/v1/hls.js",function(){n="mpsComRun";o=setInterval(function(){if(e==true){if(n in window){clearInterval(o);mpsComRun.call(w,l);return}return}var v=t.comv+"/com.js?v=lkkgurgeuhsdusdyusy";var G=document.createElement("script");G.type="text/javascript";G.charset="UTF-8";G.src=v;document.getElementsByTagName("body")[0].appendChild(G);e=true;if(n&&n in window){clearInterval(o);mpsComRun.call(w,l)}},100)})};var q=function(){n="html5playerRun";o=setInterval(function(){if(e==true){if(n in window){e=false;html5playerRun.call(w,l);clearInterval(o);return}return}var v=t.htmlv+"/html5player.js?v=shdjhsj39232323/1.1.8.1.20180412";var G=document.createElement("script");G.type="text/javascript";G.charset="UTF-8";G.src=v;document.getElementsByTagName("body")[0].appendChild(G);G.onload=G.onreadystatechange=function(){if(!this.readyState||this.readyState==="loaded"||this.readyState==="complete"){G.onload=G.onreadystatechange=null}};G.onerror=function(H){r("hls",v,"loadfail")};e=true;if(n&&n in window){e=false;clearInterval(o);html5playerRun.call(w,l)}},100)};var r=function(H,v,G){var J=l.hlsUrl.indexOf("//");J=l.hlsUrl.substring(J+2,l.hlsUrl.length);J=J.substring(J.indexOf("/")+1,J.length);l.lssApp=J.substring(0,J.indexOf("/"));l.lssStream=J.substring(J.indexOf("/")+1,J.indexOf("."));var I={};I.App=l.lssApp;I.Stream=l.lssStream;I.PlayDomainName=l.rtmpDomain;I.MPSId=l.appId;I.PlayerId=l.mpsId;I.Website=window.location.href;I.LoadFailJs=v;I.LoadStatus=G;I.Sendtime=new Date().getTime();I.ProtocolType=H;I.BrowserType=B();I.ADUin=l.uin;I.session_id=l.session_id;$.ajax({type:"POST",crossDomain:true,contentType:"application/json",url:"https://mqmps.aodianyun.com:843/v1/collect/Mps_LoadStatusInfo",data:JSON.stringify(I),dataType:"json",complete:function(K){if(K.status==201){}else{l.errCallback(K.status)}},success:function(K){}})};var B=function(){var I,H,G,J,v;G=navigator.userAgent;H=["Opera","Chrome","Safari","IE 6","IE 7","IE 8","IE 9","IE 10","IE 11","Firefox"];for(J=0,v=H.length;J<v;J++){I=H[J];if(G.indexOf(I)>-1){return I.replace(" ","")}}return"Other"};function a(H,G){var v=document.createElement("script");v.type="text/javaScript";v.src=H;document.getElementsByTagName("head")[0].appendChild(v);if(G!=null&&G!=undefined){v.onload=G}}function z(){var v=0;var G=0;if(f){var I=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(I){v=1;VSwf=I.GetVariable("$version");G=parseInt(VSwf.split(" ")[1].split(",")[0])}}else{if(navigator.plugins&&navigator.plugins.length>0){var I=navigator.plugins["Shockwave Flash"];if(I){v=1;var J=I.description.split(" ");for(var H=0;H<J.length;++H){if(isNaN(parseInt(J[H]))){continue}G=parseInt(J[H])}}}}return{f:v,v:G}}};